# 다중 디스플레이·잠금 화면 QA 시나리오

다음 개발 진행 사항 §7(다중 디스플레이 보완) 및 §11에 따른 QA 체크리스트입니다.  
잠금화면 **alwaysOnTop·포커스 정책**과, 추후 다중 모니터 지원 시 확인할 시나리오를 정리했습니다.

---

## 1. 잠금화면 항상 위 (alwaysOnTop)

| # | 시나리오 | 예상 결과 |
|---|----------|-----------|
| 1.1 | 잠금화면 표시 후 다른 앱(브라우저, 메모장 등)을 연다. | 잠금화면이 다른 창 **위에** 유지된다. |
| 1.2 | 잠금화면에서 PC-ON 또는 긴급사용으로 해제 → 작동정보 화면으로 전환된다. | 해제 후 작동정보 창은 **항상 위가 아니다**(일반 창처럼 다른 앱 뒤로 가질 수 있음). |
| 1.3 | 잠금화면에서 로그아웃(핫키 Cmd/Ctrl+Shift+L) → 로그인 화면으로 전환된다. | 로그인 창은 **항상 위가 아니다**. |

---

## 2. 포커스 정책

| # | 시나리오 | 예상 결과 |
|---|----------|-----------|
| 2.1 | 잠금 필요 시점(종업 경과·이석 감지 등)에 잠금화면이 뜬다. | 잠금화면 창에 **포커스**가 있다. |
| 2.2 | 트레이 메뉴에서 「잠금화면 열기」 또는 핫키(Cmd/Ctrl+Shift+K)로 잠금화면을 연다. | 잠금화면 창에 **포커스**가 있다. |
| 2.3 | 잠금화면이 떠 있는 동안 다른 앱을 클릭해 보려 한다. | (OS에 따라) 잠금창이 항상 위에 있으므로 다른 앱이 완전히 가리기 어렵다. 포커스는 잠금창에 유지되는 것이 바람직하다. |
| 2.4 | **macOS**: Cmd+Tab / **Windows**: Alt+Tab으로 다른 앱으로 전환했다가 다시 에이전트를 선택한다. | 잠금화면이 **다시 맨 앞·전체 화면**으로 복귀한다(blur 시 app.focus(steal)·moveTop·setAlwaysOnTop·setFullScreen·focus 적용). |

---

## 3. OS별 우회 동작 (참고)

- **Windows**: Alt+Tab 시 잠금 화면이 뒤로 가면 blur 핸들러로 잠금창이 다시 앞으로 복귀한다(§2.4). setAlwaysOnTop level은 Windows에서 무시되나 동작은 동일.
- **macOS**: Cmd+Tab 시 blur 핸들러로 잠금창 재진입. Mission Control(스페이스/제스처)으로 데스크톱 전환 시 잠금 창은 setVisibleOnAllWorkspaces(true)로 모든 공간에 표시된다.

위 동작은 “우회”가 아니라 OS 기본 동작이며, 필요 시 시나리오에 포함해 회귀 테스트한다.

---

## 4. 다중 모니터 (추후 점검)

**현재**: 단일 창(mainWindow)만 사용. 잠금·작동정보·로그인 모두 **한 창**에서 화면만 전환한다.

**추후** 다음이 구현되면 아래 시나리오를 추가한다.

| # | 시나리오 | 예상 결과 |
|---|----------|-----------|
| 4.1 | 보조 모니터를 연결한 뒤 잠금이 걸린다. | (구현 시) **디스플레이마다 잠금 창 1개**가 뜬다. |
| 4.2 | 잠금 표시 중 보조 모니터를 분리(케이블 해제)한다. | (구현 시) 해당 디스플레이용 잠금 창이 제거되거나 재배치된다(핫플러그 대응). |
| 4.3 | 보조 모니터를 다시 연결한다. | (구현 시) 새 디스플레이에 잠금 창이 생성된다. |

---

## 5. 체크리스트 요약

- [ ] 1.1 ~ 1.3: 잠금 시 항상 위, 해제/로그인 시 항상 위 해제
- [ ] 2.1 ~ 2.4: 잠금 시 포커스, Cmd+Tab/Alt+Tab 후 잠금창 재진입
- [ ] 3: OS별 작업 전환 동작 확인(선택)
- [ ] 4.x: 다중 모니터 구현 후 추가

---

## 6. 참고 — 터미널 경고 (macOS)

개발 시 터미널에 `representedObject is not a WeakPtrToElectronMenuModelAsNSObject` 로그가 반복 출력될 수 있다. Electron/Chromium의 macOS 네이티브 메뉴 내부 경고이며, **앱 동작에는 영향 없음**. 무시해도 된다.

완료한 항목은 체크 후, 이슈가 있으면 증상·OS·재현 단계를 기록해 개발에 전달하면 됩니다.
