# 로그인 테스트 방법

## 1. 로그인 화면이 나오도록 설정하기

앱은 **`userServareaId`와 `userStaffId`가 모두 있을 때** “이미 로그인됨”으로 판단해 메인 화면만 표시합니다.  
**로그인 화면부터 테스트**하려면 이 값들을 비워야 합니다.

### 방법 A: config.json만 수정 (권장)

프로젝트 루트의 `config.json`을 아래처럼 **apiBaseUrl만** 두고 저장합니다.

```json
{
  "apiBaseUrl": "https://api.tigris5240.com"
}
```

- `userServareaId`, `userStaffId` 키를 **삭제**하거나
- 기존 파일을 백업한 뒤 위 내용으로 **덮어쓰기**

### 방법 B: state.json 제거

이전에 로그인한 적이 있으면 `state.json`에 로그인 정보가 저장되어 있을 수 있습니다.  
프로젝트 루트에 `state.json`이 있으면 **삭제**하거나 이름을 바꿔 두면, config만으로 판단하게 됩니다.

- 예: `state.json` → `state.json.bak` 으로 이름 변경

정리하면, **로그인 화면을 보려면**  
`config.json`에는 `apiBaseUrl`만 있고, `state.json`에는 로그인 정보가 없어야 합니다.

---

## 2. 앱 실행

```bash
npm start
```

로그인 정보가 없으면 **로그인 화면**이 먼저 나옵니다.

---

## 3. 로그인 2단계 진행

### 1단계: 전화번호

1. **전화번호** 입력 (예: `010-1234-5678`)
2. **다음** 클릭 (또는 **Enter** 키)  
   - `GET/POST getPcOffServareaInfo.do` 호출  
   - 해당 전화번호로 등록된 **서비스 영역 목록**을 가져옴

- 서버/네트워크 오류 시 빨간색 에러 문구가 표시됩니다.
- 등록된 서비스 영역이 없으면 “등록된 서비스 영역이 없습니다” 등으로 안내됩니다.

### 2단계: 서비스 영역 + 계정

1. **서비스 영역** 드롭다운에서 하나 선택
2. **사용자 ID** 입력
3. **비밀번호** 입력
4. **로그인** 클릭 (또는 **Enter** 키)  
   - `getPcOffLoginUserInfo.do` 호출로 인증
   - 성공 시 `state.json`에 로그인 정보 저장 후 **메인(잠금) 화면** 또는 **같은 창에서 잠금화면**으로 전환

- **이전** 버튼으로 1단계(전화번호)로 돌아갈 수 있습니다.

---

## 4. 서비스 영역이 안 나올 때

- **1단계에서** "등록된 서비스 영역이 없습니다"가 나오면:
  - 해당 **전화번호**가 서버에 등록되어 있는지 확인
  - **config.json**의 `apiBaseUrl`이 실제 운영/테스트 서버 주소인지 확인
- **2단계로 넘어갔는데** 서비스 영역 드롭다운이 비어 있으면:
  - 서버 응답 형식이 다를 수 있음. 앱은 `list` / `data` / `servareaList` / `result` 또는 배열 직접 반환을 지원함
  - 개발자 도구(Cmd+Option+I) → **Network** 탭에서 `getPcOffServareaInfo.do` 요청을 선택한 뒤 **Response**에 어떤 JSON 구조가 오는지 확인

---

## 5. 실제 서버가 있을 때

- `config.json`의 `apiBaseUrl`이 **실제 PCOFF API 서버**를 가리켜야 합니다.  
  (예: `https://api.tigris5240.com`)
- 테스트용 **전화번호·사용자 ID·비밀번호**는 운영/개발 담당자에게 받아 사용하세요.
- 서버가 `getPcOffServareaInfo.do`, `getPcOffLoginUserInfo.do` 규격(PC_OFF_AGENT_API.md)과 맞아야 합니다.

---

## 6. 로그인 후 다시 “로그인부터” 테스트하려면

1. `state.json` 삭제 또는 이름 변경  
   또는  
2. `config.json`에서 `userServareaId`, `userStaffId` 제거 후 저장  
3. 앱 재시작 (`npm start`)  
→ 다시 로그인 화면부터 진행할 수 있습니다.

---

## 7. 전역 단축키 (개발자·테스트용)

앱이 실행 중이면 **어느 창이 포커스되어 있든** 아래 단축키로 동작합니다. 맥에서 메뉴 막대(트레이) 아이콘이 안 보여도 사용 가능합니다.

| 동작 | macOS | Windows |
|------|--------|---------|
| **로그아웃** (로그인 화면으로) | Cmd + Shift + L | Ctrl + Shift + L |
| **PCOFF 작동정보** 창 열기 | Cmd + Shift + I | Ctrl + Shift + I |
| **잠금화면** 창 열기 | Cmd + Shift + K | Ctrl + Shift + K |
| **강제 종료** (개발자 전용, 트레이 메뉴 미노출) | Control + Shift + Q (⌃ 키) | Ctrl + Shift + Q |

로그아웃 동작: `state.json`에서 로그인 정보 제거 후 로그인 화면으로 전환. **강제 종료**는 앱을 즉시 종료할 때 사용하며, 트레이 메뉴·사용자 UI에는 표시되지 않습니다.
