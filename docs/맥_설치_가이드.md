# Mac 설치 파일 실행 가이드

GitHub Release에서 받은 **5240 PcOff Agent** Mac용 `.dmg` 또는 `.zip`을 설치한 뒤, **「열 수 없음」** / **「Apple이 악성 코드 없음을 확인할 수 없습니다」** 경고가 나오는 경우의 해결 방법입니다.

---

## 왜 이런 경고가 나오나요?

- macOS **Gatekeeper**는 **Apple Developer ID로 서명되고 Apple notarization을 받은 앱**만 기본적으로 허용합니다.
- 현재 CI에서 만든 Mac 설치 파일은 **코드 서명·notarization을 하지 않습니다** (Apple Developer 계정·인증서 설정이 필요함).
- 그래서 "Apple이 이 앱에 악성 코드가 없음을 확인할 수 없습니다"라는 메시지와 함께 실행이 차단됩니다.
- **내부 테스트·개발용**으로는 아래 방법으로 실행을 허용할 수 있습니다.

---

## 방법 1: 마우스 오른쪽 버튼으로 "열기" (가장 간단)

1. **Applications** 폴더(또는 .dmg에서 복사한 위치)에서 **5240 PcOff Agent** 앱을 찾습니다.
2. **더블클릭하지 말고**, **마우스 오른쪽 버튼**(또는 Control+클릭)으로 앱을 클릭합니다.
3. 메뉴에서 **「열기」**를 선택합니다.
4. 다시 **「열기」** 버튼이 있는 창이 나오면 **「열기」**를 눌러 실행합니다.
5. 이 앱은 "승인된 앱"으로 기록되어, 다음부터는 **일반 더블클릭**으로도 실행됩니다.

---

## 방법 2: 시스템 설정에서 허용

1. **더블클릭**으로 실행을 시도했다가 **「열 수 없음」** / **「휴지통으로 이동」** 창이 떴다면 **「완료」**를 누릅니다.
2. **시스템 설정**(또는 시스템 환경설정)을 엽니다.
3. **개인 정보 보호 및 보안** → **보안**으로 이동합니다.
4. **「일반」** 탭 아래에 **"5240 PcOff Agent은(는) 다운로드한 앱에서 열었습니다"** 같은 문구와 **「그래도 열기」** 버튼이 보이면, **「그래도 열기」**를 클릭합니다.
5. 확인 창에서 다시 **「열기」**를 누르면 앱이 실행됩니다.

---

## 방법 3: 터미널에서 격리 속성 제거 (고급)

**주의**: 아래 명령은 해당 앱에 대해 Gatekeeper 검사를 우회합니다. **신뢰하는 앱**에만 사용하세요.

1. **터미널**을 엽니다.
2. 아래 명령을 입력합니다 (앱 이름에 공백이 있으므로 따옴표 유지).

   ```bash
   xattr -cr "/Applications/5240 PcOff Agent.app"
   ```

3. Enter 후, **Applications**에서 **5240 PcOff Agent**를 더블클릭해 실행해 봅니다.

`.dmg`를 막 열어서 아직 Applications로 복사하지 않았다면, **드래그로 Applications에 앱을 넣은 뒤** 위 명령을 실행하면 됩니다.

---

## 정식 배포를 위해 (개발자용)

- **Apple Developer Program** 가입 후 **Developer ID Application** 인증서로 앱을 **코드 서명**하고, **notarization**을 받으면, 사용자는 위와 같은 경고 없이 설치·실행할 수 있습니다.
- electron-builder에서는 `CSC_*` 환경 변수·keychain 설정 후 `electron-builder --mac`으로 서명·notarization을 할 수 있으며, CI에서는 GitHub Secrets에 인증서·비밀번호를 넣어 자동화할 수 있습니다.
- 상세는 [다음_개발_진행_사항.md](다음_개발_진행_사항.md)의 "패키징 및 플랫폼 검증"·"Windows Defender/SmartScreen" 섹션 및 Apple 문서(Notarization, Code Signing)를 참고하세요.
